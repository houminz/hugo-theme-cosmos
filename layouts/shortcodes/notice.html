{{/* Available notice types: info, warning, tip, important */}}
{{- $noticeType := .Get 0 | default "info" -}}
{{/* Workaround markdownify inconsistency for single/multiple paragraphs */}}
{{- $raw := (markdownify .Inner | chomp) -}}
{{- $block := findRE "(?is)^<(?:address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h(?:1|2|3|4|5|6)|header|hgroup|hr|li|main|nav|noscript|ol|output|p|pre|section|table|tfoot|ul|video)\\b" $raw 1 -}}
{{/* Count how many times we've called this shortcode and load the css if it's the first time */}}
{{- if not ($.Page.Scratch.Get "noticecount") -}}

<div>
    {{ os.ReadFile "assets/sprites/solid/circle-info.svg" | safeHTML }}
    {{ os.ReadFile "assets/sprites/solid/triangle-exclamation.svg" | safeHTML }}
    {{ os.ReadFile "assets/sprites/solid/circle-check.svg" | safeHTML }}
    {{ os.ReadFile "assets/sprites/solid/circle-exclamation.svg" | safeHTML }}
</div>
{{- end -}}

{{- $.Page.Scratch.Add "noticecount" 1 -}}
<div class="notice {{ $noticeType }}" {{ if len .Params | eq 2 }} id="{{ .Get 1 }}" {{ end }}>
    {{ $spriteId := "circle-info" }}
    {{ if (eq $noticeType "info") }}
        {{ $spriteId = "circle-info" }}
    {{ else if (eq $noticeType "warning") }}
        {{ $spriteId = "triangle-exclamation" }}
    {{ else if (eq $noticeType "tip") }}
        {{ $spriteId = "circle-check" }}
    {{ else if (eq $noticeType "important") }}
        {{ $spriteId = "circle-exclamation" }}
    {{ end }}
    <p class="first notice-title">
        <span class="icon-notice baseline">
            <svg>
                <use href="#{{- $spriteId -}}"></use>
            </svg>
        </span>
        {{- i18n $noticeType -}}
    </p>
{{- if or $block (not $raw) }}{{ $raw }}{{ else }}<p>{{ $raw }}</p>{{ end -}}
</div>


